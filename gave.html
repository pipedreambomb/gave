<head>
  <title>gave</title>
</head>

<body>
  <div id="login">
    {{loginButtons align="right"}}
  </div>
  <h1>Giving Counts</h1>
  {{renderPage}}
</body>

<template name="home">
  <a href='/tests' class='btn'>Run tests</a>
  <h2>Transactions</h2>
  {{> transactions }}
  <h2>Causes</h2>
  {{> causes }}
  <h2>Effects</h2>
  {{> effects }}
</template>

<template name="tests">
  <a href='/' class='btn'>Home</a>
  {{> mochaTestReport }}
</template>

<template name="transactions">
<canvas class="transactions-bar-chart"></canvas>
<div class="transactions-bar-chart-controls">
	Show past:
	<select class="transactions-to-show-select">
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4" selected>4</option>
		<option value="5">5</option>
		<option value="6">6</option>
	</select>
	transactions
</div>
   <div id="TransactionsTable">
      <table>
         <tr>
            <th>Cause</th>
            <th>Amount</th>
            <th>Date</th>
            <th>Actions</th>
         </tr>
         {{#each Transactions}}
            <tr>
               <td>{{cause}}</td>
               <td>${{amount}}</td>
               <td>{{niceDate}}</td>
	       <td>
		       <a class='btn btn-primary' href='/edit/{{_id}}'>Edit</a> 
		       <a class='btn btn-danger tran-del' href='#' data-cause-id="{{_id}}">Delete</a> 
	       </td>
            </tr>
         {{/each}}
         <tr>
            <td colspan="4">Total: ${{SubTotal}}</td>
         </tr>
       </table>
	 <a class="btn" id="add_transaction" href='/add'>Add <i class='icon-plus-sign'></i></a>
   </div>
</template>

<template name="transaction">
<form name="transaction">
    <label>
	 Cause   
	 <select id="cause-select" name="cause">
	 {{#each Causes}}
		 <option value={{_id}} {{#if selected}}selected{{/if}}>{{name}}</option>
	 {{/each}}
	 </select>
    </label>
    <label>
	 {{#with Transaction}}
	 Amount ($)   
	 <input name="amount" value="{{amount}}"></input>
    </label>
    <label>
	 Date   
	 <input name="date" class="datepicker" value="{{shortDate}}"></input>
	 {{/with}}
    </label>
    <a href='#' class='btn' id='doneBtn'>Done</a>

  </form>
</template>

<template name="causes">
<canvas class="causes-pie-chart"></canvas>
<table>
	<tr>
		<th>Cause</th>
		<th>Total</th>
	</tr>
	{{#each Causes}}
	<tr>
		<td>{{name}}</td>
		<td>${{total}}</td>
	</tr>
	{{/each}}
         <tr>
            <td colspan="2">Total: ${{SubTotal}}</td>
         </tr>
</table>
</template>

<template name="effects">
	{{#each Causes}}
	<h5>{{name}}</h5>
	<ul>
		{{#each Effects }}
		<li>{{unit}}: {{totalEffects}}</li>
		{{/each}}
	</ul>
	{{/each}}
</template>
