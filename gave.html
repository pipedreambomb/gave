<body>
	<!--[if lte IE 8]>
		<div style='clear: both; height: 112px; padding:0; position: relative; float:right;'>
			<a href="http://www.theie8countdown.com/ie-users-info">
				<img src="http://www.theie8countdown.com/assets/badge_iecountdown.png" border="0" height="112" width="348" alt="" />
			</a>
		</div>
		<h2 style="margin-top:50px;">Unfortunately, Giving Counts does not support Internet Explorer 8 or lower at this time.</h2>
	<![endif]-->
	<!--[if lte IE 7]>
	<p>In particular, the site does not work at all with Internet Explorer 7, 6 or lower. This is due to the modern technology used in Giving Counts. 99% of internet users no longer use these browsers, and they are difficult to support and limit functionality. Please do yourself a favour and upgrade your browser! If you can't because of external factors, you could at least <a href="http://www.google.com/chromeframe">try Chrome Frame</a> for your current browser.
	<![endif]-->
	<script id="_webengage_script_tag" type="text/javascript"></script>

	{{> navbar}}
	<div class="container">
		{{renderPage}}
	</div>
</body>

<template name="navbar">
    <div class="navbar navbar-inverse navbar-fixed-top">
	  <div class="navbar-inner">
		  <div class="container">
			  <a class="brand {{#if PageIsHome}}active{{/if}}" href='/'>Giving Counts</a>
			  <ul class="nav">
				  <li {{#if PageIsFAQ}}class="active"{{/if}}><a href='/faq'>FAQ</a></li>
				  {{#if UserIsLoggedInAndNotDemoUser}}
				  <li {{#if PageIsDashboard}}class="active"{{/if}}><a href='/dashboard'>My dashboard</a></li>
				  {{else}}
				  <li {{#if PageIsDemo}}class="active"{{/if}}><a href='/demo'>Try the Demo</a></li>
				  {{/if}}
				  {{#unless PageIsSignUp}}
				  <li>{{loginButtons}}</li>
				  {{/unless}}
			  </ul>
		  </div>
	  </div>
  </div>
</template>

<template name="home">
<div class="jumbotron hero-unit span11">
	<div class="row">
		<div class="span5 offset1">
				<img src='img/screenshot.png' class="boxshadow">
				<p class="subtle">Seeing is believing - visualize the effects of your generosity.</p>
		</div>
		<div class="span5">
				<h1>You <em>are</em> making a difference!</h1>
				<p>Why don't you start measuring it? With <strong>Giving Counts</strong>, you can keep track of your donations and see charts and totals for the impact you're making. It's free!</p>
		</div>
	</div>
	{{#if UserId}}
		<a href='/dashboard' class='btn btn-primary'>Go to my dashboard</a>
	{{else}}
		<a href='/demo' class='btn btn-success'>Try the demo now!</a>
	{{/if}}
</div>
<div class="row centred">
	<div class="span3 offset1">
		<img src='img/App-share-manager-icon.png' class="half-width-centered">
		<h3>Organize</h3>
		<p>Keep track of the charitable donations you make with our free web app. It's like keeping your own spreadsheet, but way more fun and powerful.</p>
	</div>
	<div class="span3">
		<img src='img/Pie-chart-icon.png' class="half-width-centered">
		<h3>Measure</h3>
		<p>You can't know for sure how well you're doing something until you start to measure it. See tables and charts representing the size and distribution of your donations so far.</p>
	</div>
	<div class="span3">
		<img src='img/blue-folder-icon.png' class="half-width-centered">
		<h3>Give</h3>
		<p>"Giving" means transferring something, but money is just the beginning. What are your donations being turned into? Find out the effects your generosity is having in the real world, based on standard performance of your selected causes. </p>
	</div>
</div>
<div class="hero-unit span9 offset1">
	<h2>Is Giving Counts for me?</h2>
	<p>Since Giving Counts is just as much about effects as it is giving, at time of launch (21st April 2013) we only allow tracking of donations to the <a href="http://www.givewell.org/charities/top-charities">top charities recommended by GiveWell.org</a>. If you give to these charities, welcome aboard!</p>
	<p>The reason for this current restriction is that we incorporate the information GiveWell publishes after painstaking analysis into what returns can be expected from each dollar given to an organization. This is also the first version of the site, and we are launching early and depending on your feedback to shape its future, so let us know if this or anything else matters to you.</p>
	<p>In time, we hope to allow you to add your own causes so you can track all your donations here. You will have the option for these to be published for other users, if you can provide sufficient evidence of their efficacy.</p>
</div>
<div class="span9 offset1">
	<a href='/demo' class='btn btn-large btn-primary centered'>See for yourself by trying the demo</a>
</div>
</template>

<template name="faq">
  <h2>FAQ</h2>
  
  <h3>What is Giving Counts?</h3>
  <p>Giving Counts is a free, open-source web application to help serial philanthropists and do-gooders track their charitable donations and get feedback about the impact they're making.</p>

  <h3>Is Giving Counts for me?</h3>
  <p>As explained on the <a href='/'>front page</a>:
  <blockquote>
	<p>Since Giving Counts is just as much about effects as it is giving, at time of launch (21st April 2013) we only allow tracking of donations to the <a href="http://www.givewell.org/charities/top-charities">top charities recommended by GiveWell.org</a>. If you give to these charities, welcome aboard!</p>
	<p>The reason for this current restriction is that we incorporate the information GiveWell publishes after painstaking analysis into what returns can be expected from each dollar given to an organization. This is also the first version of the site, and we are launching early and depending on your feedback to shape its future, so let us know if this or anything else matters to you.</p>
	<p>In time, we hope to allow you to add your own causes so you can track all your donations here. You will have the option for these to be published for other users, if you can provide sufficient evidence of their efficacy.</p>
  </blockquote> 

  <h3>What's the big idea?</h3>
  The big idea is that giving a good proportion of one's income to some stellar charities can have an incredible impact. I was very impressed by the book <a href="http://thelifeyoucansave.org">The Life You Can Save by Peter Singer</a>, having heard about it in a <a href="http://developmentdrums.org/484">Development Drums podcast episode</a> with Toby Ord of <a href="http://givingwhatwecan.org">givingwhatwecan.org</a>.</p>
  <p>I am currently starting my own software business and have almost no income, but I'd love to help facilitate more and better giving in the community. It's pretty impressive that though Giving What We Can is not a well known organization, they have already marshalled $120,000,000 of past and future pledges. If I can add a couple of percentage points to that by making it more fun and rewarding, I'll make a bigger difference than all the money I'll ever earn would!</p>

  <h3>If Giving Counts is open source, where is the code?</h3>
  <a href="https://github.com/pipedreambomb/gave">It's on GitHub</a>, of course! Any help would be tremendously helpful, especially with design of the site as I am more of a developer than a designer. It's written with the <a href="http://meteor.com">Meteor framework</a> for JavaScript and runs on <a href="http://nodejs.com">NodeJS</a>, so unfortunately you'll need to be at least vaguely familiar at least with the latter (similar to myself!) to get it running on your machine.</p>

  <h3>How is Giving Counts funded?</h3>
  <p>It isn't! <a href="http://meteor.com">Meteor.com</a> are very kindly hosting the site for free. The site is developed by volunteers (currently only one, but he would love some help, see previous question!).</p>

  <h3>I still have questions...</h3>
  <p>Please, use the feedback form on the right side of the page, honestly and often. I will try to get back to you quickly, if you ask me to. This is currently very much work-in-progress, and you know better than I do how it can grow and improve. If you hate forms and love email, you can <a href="mailto:g@georgenixon.co.uk">send me one</a> as well.</p>
</template>

<template name="dashboard">
{{> demo }}
<div class="row">
  <div class="span8">
	  <h2>Donations</h2>
	  {{> transactions }}
  </div>
  <div class="span4">
	  <h2>Causes</h2>
	  {{> causes_summary }}
	  <h2>Effects</h2>
	  {{> effects }}
  </div>
</div>
</template>

<template name="tests">
  <a href='/' class='btn'>Home</a>
  {{> mochaTestReport }}
</template>

<template name="transactions">
{{#if UserHasAtLeast2Transactions }}
	{{> transactions_chart }}
{{/if}}
{{#if UserHasTransactions }}
	{{> transactions_table }}
{{else}}
<p>You don't have any donations to display here. You should add one!</p>
<a class="btn" id="add_transaction" href='/add'>Add new donation<i class='icon-plus-sign'></i></a>
{{/if}}
</template>

<template name="transactions_chart">
<canvas class="transactions-bar-chart" width="680" height="220"></canvas>
<div class="transactions-bar-chart-controls">
	Chart shows
	<select class="transactions-to-show-select span1">
		{{#each SelectNumberOfTransactionsOptions}}
		<option value="{{numTrans}}" 
				{{#if selected}}selected{{/if}}>
			{{numTrans}}
		</option>
		{{/each}}
	</select>
	recent transactions
</div>
</template>

<template name="transactions_table">
   <div id="TransactionsTable">
	<a class="btn" id="add_transaction" href='/add'>Add new donation<i class='icon-plus-sign'></i></a>
      <table>
         <tr>
            <th>Cause</th>
            <th>Amount</th>
            <th>Date</th>
            <th>Actions</th>
         </tr>
         {{#each Transactions}}
            <tr>
               <td>{{cause}}</td>
               <td>${{amount2dp}}</td>
               <td>{{niceDate}}</td>
	       <td>
		       <a class='btn' href='/edit/{{_id}}'>Edit</a> 
		       <a class='btn btn-danger tran-del' href='#' data-cause-id="{{_id}}">Delete</a> 
	       </td>
            </tr>
         {{/each}}
         <tr>
		 <td><strong>Total:</strong></td>
		 <td><strong>$<span class="Transactions_subtotal">{{SubTotal}}</span></strong></td>
         </tr>
       </table>
   </div>
</template>

<template name="transaction">
{{> demo}}
<h1>{{Action}} donation</h1>
{{#if TransactionError}}
<div class="alert alert-error"><strong>Whoops!</strong> {{TransactionError}}</div>
{{/if}}
<div class="row">
	<div class="span8">
		<h2>Step 1: choose a cause</h2>
		{{> causes_info }}
	</div>
	<div class="span4">
		<h2>Step 2: enter a donation</h2>
		<form name="transaction">
		 {{#with Transaction}}
		    <label>
			 Amount
			 <div class="input-prepend">
				 <span class="add-on">$</span>
				 <input id="tranAmount" name="amount" value="{{amount}}" placeholder="E.g. 29.99" class="span2" type="text" {{#unless UserHasSelectedCause}}disabled{{/unless}}></input>
			 </div>
		    </label>
		    <label>
			 Date   
			 <input name="date" class="datepicker" value="{{shortDate}}" placeholder="E.g. 12/31/2012" type="text" {{#unless UserHasSelectedCause}}disabled{{/unless}}></input>
		    </label>
		 {{/with}}
		    {{> live_effects }}
		    <br/>
		    <h2>Step 3: confirm</h2>
		    <a href='#' class='btn btn-success' id='doneBtn'>Add this donation</a>
		    <a href='#' class='btn' id='cancelBtn'>Cancel</a>
		  </form>
	  </div>
  </div>
</template>

<template name="live_effects">
<h3>Effects (updated as you type):</h3>
	<ul>
		{{#each Effects}}
			{{#if nocause}}
				<li>No cause selected.</li>
			{{/if}}
			{{#if noamount}}
				<li>No amount selected.</li>
			{{/if}}
			{{#if amount}}
				<li>{{description}}: {{amount_2dp}}</li>
			{{/if}}
		{{/each}}
	</ul>
</template>

<template name="causes_summary">
{{#if UserHasTransactions}}
	<canvas class="causes-pie-chart"></canvas>
	<table>
		<tr>
			<th>Cause</th>
			<th>Donations</th>
		</tr>
		{{#each Causes}}
		<tr>
			<td>{{name}}</td>
			<td>${{total}}</td>
		</tr>
		{{/each}}
		 <tr>
			 <td><strong>Total:</strong></td>
			 <td><strong>${{SubTotal}}</strong></td>
		 </tr>
	</table>
{{else}}
	<p>As soon as you add some transactions, a summary of the causes you have given to will appear here.</p>
{{/if}}
</template>

<!-- Display information about each cause when creating a new donation -->
<template name="causes_info">
{{#each Causes}}
<div class="cause_info {{selected}}">
	<hr/>
	<h3>{{name}}</h3>
	<h4>Category: {{category}}</h4>
	<p><a href="{{website}}" target='_blank'>Visit website</a></p>
	<p>{{description}}</p>
	<div class="row">
		<div class="span6">
			<p>Effects:</p>
			<ul>
			{{#each sorted_effects}}
			<li>1 <span class="lowercase">{{descr_singular}}</span> for every ${{perDollars}} given
				<sup><a href="{{evidence}}" target='_blank'>[ref]</a></sup>
			</li>
			{{/each}}
			</ul>
		</div>
		<div class="span2">
			<a href='#' class="btn select-cause" data-cause-id="{{_id}}">Select</a>
		</div>
	</div>
</div>
{{/each}}
</template>

<template name="effects">
{{#if UserHasTransactions }}
	<canvas class="effects-line-chart"></canvas>
	<div class="effects-line-chart-controls">
		Chart shows
		<select class="months-to-show-select span1">
			{{#each SelectNumberOfMonthsOptions}}
			<option value="{{numMonths}}" 
					{{#if selected}}selected{{/if}}>
				{{numMonths}}
			</option>
			{{/each}}
		</select>
		recent months
	</div>
	{{#each Causes}}
		<h5>{{name}}</h5>
		<ul>
			{{#each Effects }}
			<li>{{unit}}: {{totalEffects}}</li>
			{{/each}}
		</ul>
	{{/each}}
{{else}}
	<p>No effects to display yet.</p>
{{/if}}
</template>

<template name="demo">
{{#if UserIsDemoUser }}
<div class="alert alert-info alert-block">
    <h4>Welcome to the demo!</h4>
    Have a play in this public sandbox, and see how the site works. When you're ready, grab a new account just for you. <a id="demo-signup" class="btn btn-primary" href="signup">Sign Up</a>
</div>
{{/if}}
</template>

<template name="signup">
<div class="row">
<div class="span3 offset3">
	<h1>Sign up in 10 seconds flat!</h1>
	<p>Choose to either:</p>
	<p>1) Sign in with your existing profile from Google, Facebook or Twitter.</p>
	<p><strong>or</strong></p>
	<p>2) Enter a new username and password.</p>
	<p>That's it! Welcome to Giving Counts :)</p>
</div>
<div class="span3 gave-signup-form">
	{{loginButtons}}
</div>
</template>
